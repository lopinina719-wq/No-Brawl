<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>KEDZI BRAWL - WIN STREAK UPDATE</title>
</head>
<body style="margin:0; background:#000; color:#fff; font-family: 'Arial Black', sans-serif; text-align:center; overflow:hidden; user-select:none;">

    <style>
        @keyframes fire-glow { 0% { text-shadow: 0 0 5px #ff4500; transform: scale(1); } 50% { text-shadow: 0 0 20px #ff8c00, 0 0 30px #ff4500; transform: scale(1.1); } 100% { text-shadow: 0 0 5px #ff4500; transform: scale(1); } }
        .streak-active { animation: fire-glow 0.8s infinite; color: #ffcc00 !important; font-weight: bold; }
        .window { display:none; position:fixed; inset:0; background:rgba(0,0,0,0.98); z-index:1000; padding:15px; overflow-y:auto; }
        .content { background:#1a1a1a; padding:20px; border-radius:25px; border:3px solid #ffcc00; margin-top:10px; }
        .opt-btn { background:#333; color:white; border:none; padding:15px; width:100%; margin:8px 0; border-radius:12px; display:flex; justify-content:space-between; align-items:center; cursor:pointer; font-weight:bold; }
        .res-win { display:none; position:fixed; top:50%; left:50%; transform:translate(-50%, -50%); background:#222; border:5px solid #ffcc00; padding:30px; border-radius:30px; z-index:2000; min-width:260px; box-shadow: 0 0 50px #000; }
    </style>

    <div style="background:#111; padding:10px 15px; display:flex; justify-content:space-between; border-bottom:3px solid #ffcc00; align-items:center;">
        <div style="display:flex; align-items:center; gap:10px;">
            <div id="p-icon" style="font-size:30px;">üë§</div>
            <div style="text-align:left;">
                <div id="p-nick" style="color:#ffcc00; font-size:16px;">–ì—Ä–∞–≤–µ—Ü—å</div>
                <div id="p-title-display" style="font-size:10px; color:#aaa; font-weight:bold;">–ü–û–ß–ê–¢–ö–Ü–í–ï–¶–¨</div>
            </div>
        </div>
        <div style="text-align:right;">
            <div style="color:#3498db; font-size:16px;">üèÜ <span id="trophies">0</span></div>
            <div id="streak-ui" style="color:#ff4500; font-size:12px; display:none;">üî• –°–µ—Ä—ñ—è: <span id="streak-val">0</span></div>
        </div>
    </div>

    <div style="padding:20px;">
        <h1 style="color:#ffcc00; font-size:26px; margin:0;">KEDZI BRAWL</h1>
        
        <div style="display:flex; justify-content:center; gap:10px; margin:10px 0;">
            <div id="cur-mode-txt" style="background:#222; padding:8px 15px; border-radius:10px; color:#00ff00; font-size:13px; border:1px solid #333;">üöÄ –°—Ç–æ–ª–∫–Ω–æ–≤–µ–Ω–∏–µ</div>
            <div style="background:#222; padding:8px 15px; border-radius:10px; color:#f1c40f; font-size:13px; border:1px solid #333;">üí∞ <span id="coins">0</span></div>
        </div>

        <div style="background:rgba(255,255,255,0.05); padding:10px; border-radius:15px; margin-bottom:10px; font-size:18px; border: 1px solid #333;">
            –í–ò–ë–†–ê–ù–û: <span id="selected-brawler-name" style="color:#ffcc00;">EDGAR</span>
        </div>

        <button onclick="startBattle()" id="play-btn" style="background:linear-gradient(#ffdd00, #ffcc00); width:100%; padding:22px; font-size:28px; border:none; border-radius:20px; font-weight:bold; color:#000; box-shadow: 0 6px #b39200; cursor:pointer;">–ì–†–ê–¢–ò</button>
        
        <div style="display:grid; grid-template-columns: 1fr 1fr; gap:10px; margin-top:15px;">
            <button onclick="openWin('win-modes')" style="background:#2ecc71; padding:15px; border-radius:12px; border:none; font-weight:bold;">–†–ï–ñ–ò–ú–ò</button>
            <button onclick="openWin('win-brawlers')" style="background:#3498db; padding:15px; border-radius:12px; border:none; color:#fff; font-weight:bold;">–ì–ï–†–û–á</button>
            <button onclick="openWin('win-shop')" style="background:#e74c3c; padding:15px; border-radius:12px; border:none; color:#fff; font-weight:bold;">–ú–ê–ì–ê–ó–ò–ù</button>
            <button onclick="openStarrDrop()" style="background:#8e44ad; padding:18px; border-radius:15px; border:none; color:#fff; font-weight:bold;">–°–¢–ê–† –î–†–û–ü</button>
        </div>
        
        <div style="margin-top:20px;">
            <button onclick="openWin('win-credits')" style="background:none; border:none; color:#444; font-size:12px;">CREDITS üéñÔ∏è</button>
        </div>
    </div>

    <div id="win-res" class="res-win">
        <h2 id="res-status">–ü–ï–†–ï–ú–û–ì–ê!</h2>
        <h1 id="res-diff">+8 üèÜ</h1>
        <div id="streak-bonus-txt" style="color:#ffcc00; font-size:14px; margin-bottom:10px; font-weight:bold;"></div>
        <button onclick="closeRes()" style="background:#ffcc00; color:#000; width:100%; padding:15px; border-radius:15px; font-weight:bold; border:none;">–ü–†–û–î–û–í–ñ–ò–¢–ò</button>
    </div>

    <div id="win-brawlers" class="window"><div class="content"><h2>–û–ë–ï–†–ò –ì–ï–†–û–Ø</h2><div id="brawlers-list" style="display:grid; grid-template-columns:1fr 1fr; gap:10px;"></div><button onclick="closeWin('win-brawlers')" class="opt-btn" style="background:#ff4444; justify-content:center;">–ó–ê–ö–†–ò–¢–ò</button></div></div>
    <div id="win-shop" class="window"><div class="content"><h2>–ú–ê–ì–ê–ó–ò–ù</h2><div id="shop-list"></div><button onclick="closeWin('win-shop')" class="opt-btn" style="background:#ff4444; justify-content:center;">–ó–ê–ö–†–ò–¢–ò</button></div></div>
    <div id="win-credits" class="window"><div class="content"><h2>CREDITS</h2><p>–ê–≤—Ç–æ—Ä: <b>LOL_pak661 / Amogus_144</b></p><hr><p>–§—ñ–Ω–∞–ª –∑–∞–≤—Ç—Ä–∞ –æ 15:00!</p><button onclick="closeWin('win-credits')" class="opt-btn" style="background:#ff4444; justify-content:center;">–û–ö</button></div></div>
    <div id="win-modes" class="window"><div class="content"><h2>–†–ï–ñ–ò–ú–ò</h2><button class="opt-btn" onclick="setMode(1000,'üöÄ –°—Ç–æ–ª–∫–Ω–æ–≤–µ–Ω–∏–µ',8)">üöÄ –°—Ç–æ–ª–∫–Ω–æ–≤–µ–Ω–∏–µ (+8üèÜ)</button><button class="opt-btn" onclick="setMode(1000,'‚öΩ –ë—Ä–∞–≤–ª –ë–æ–ª',5)">‚öΩ –ë—Ä–∞–≤–ª –ë–æ–ª (+5üèÜ)</button><button class="opt-btn" onclick="setMode(1200,'üî• –ù–æ–∫–∞—É—Ç',8)">üî• –ù–æ–∫–∞—É—Ç (+8üèÜ)</button><button onclick="closeWin('win-modes')" class="opt-btn" style="background:#ff4444; justify-content:center;">–ù–ê–ó–ê–î</button></div></div>

    <script>
        let trophies = 0, coins = 0, selected = "edgar", curMode = {t:1000, n:'üöÄ –°—Ç–æ–ª–∫–Ω–æ–≤–µ–Ω–∏–µ', winGain: 8};
        let winStreak = 0, currentTitle = "–ü–û–ß–ê–¢–ö–Ü–í–ï–¶–¨", currentIcon = "üë§";

        const brawlers = {
            "shelly":{n:"Shelly",ow:true,c:0.55},"edgar":{n:"Edgar",ow:true,c:0.75},
            "nita":{n:"Nita",ow:false,c:0.58},"leon":{n:"Leon",ow:false,c:0.93}
        };

        function updateUI() {
            document.getElementById('trophies').innerText = trophies;
            document.getElementById('coins').innerText = coins;
            document.getElementById('selected-brawler-name').innerText = brawlers[selected].n.toUpperCase();
            document.getElementById('p-title-display').innerText = currentTitle;
            
            // Win Streak UI
            const sUI = document.getElementById('streak-ui');
            if(winStreak > 0) {
                sUI.style.display = "block";
                document.getElementById('streak-val').innerText = winStreak;
                if(winStreak >= 2) sUI.classList.add('streak-active');
                else sUI.classList.remove('streak-active');
            } else {
                sUI.style.display = "none";
            }
        }

        function startBattle() {
            const btn = document.getElementById('play-btn');
            if(btn.disabled) return;
            btn.disabled = true; btn.innerText = "–£ –ë–û–Æ...";
            
            setTimeout(() => {
                let win = Math.random() < brawlers[selected].c;
                let bonus = 0;
                
                if(win) {
                    winStreak++;
                    // –†–æ–∑—Ä–∞—Ö—É–Ω–æ–∫ –±–æ–Ω—É—Å—É —Å–µ—Ä—ñ—ó
                    if(winStreak === 2) bonus = 1;
                    else if(winStreak === 3) bonus = 2;
                    else if(winStreak === 4) bonus = 3;
                    else if(winStreak >= 5) bonus = 4;
                } else {
                    winStreak = 0;
                }

                let totalGain = win ? (curMode.winGain + bonus) : -7;
                trophies = Math.max(0, trophies + totalGain);
                
                document.getElementById('res-status').innerText = win ? "–ü–ï–†–ï–ú–û–ì–ê!" : "–ü–†–û–ì–†–ê–®!";
                document.getElementById('res-status').style.color = win ? "#00ff00" : "#ff0000";
                document.getElementById('res-diff').innerText = (win ? "+" : "") + totalGain + " üèÜ";
                document.getElementById('streak-bonus-txt').innerText = (win && bonus > 0) ? `+${bonus} –ó–ê –°–ï–†–Ü–Æ üî•` : "";
                document.getElementById('win-res').style.display = "block";
                
                updateUI(); saveData();
            }, curMode.t);
        }

        function closeRes() {
            document.getElementById('win-res').style.display = "none";
            const btn = document.getElementById('play-btn'); btn.disabled = false; btn.innerText = "–ì–†–ê–¢–ò";
        }

        function openWin(id) { 
            document.getElementById(id).style.display = 'block'; 
            if(id==='win-brawlers') {
                let h = ""; for(let id in brawlers) if(brawlers[id].ow) h += `<div style="background:#444; padding:15px; border-radius:12px;" onclick="selectB('${id}')">${brawlers[id].n}</div>`;
                document.getElementById('brawlers-list').innerHTML = h;
            }
        }

        function selectB(id) { selected = id; updateUI(); closeWin('win-brawlers'); saveData(); }
        function closeWin(id) { document.getElementById(id).style.display = 'none'; }
        function setMode(t, n, g) { curMode = {t, n, winGain: g}; document.getElementById('cur-mode-txt').innerText = n; closeWin('win-modes'); }
        
        function saveData() { localStorage.setItem('kedzi_streak_save', JSON.stringify({ trophies, coins, selected, winStreak, currentTitle, owned: Object.keys(brawlers).filter(id => brawlers[id].ow) })); }
        function loadData() { 
            let s = JSON.parse(localStorage.getItem('kedzi_streak_save')); 
            if(s){ trophies=s.trophies; coins=s.coins; selected=s.selected; winStreak=s.winStreak||0; currentTitle=s.currentTitle; if(s.owned) s.owned.forEach(id=>brawlers[id].ow=true); }
            updateUI();
        }
        window.onload = loadData;
    </script>
</body>
</html>
