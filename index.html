<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KEDZI BRAWL v9.7.1</title>
</head>
<body style="margin:0; background:#000; color:#fff; font-family: 'Arial Black', sans-serif; text-align:center; overflow:hidden;">

    <style>
        @keyframes rainbow { 0% { background: #ff0000; } 20% { background: #ffcc00; } 40% { background: #00ff00; } 60% { background: #00ffff; } 80% { background: #0000ff; } 100% { background: #ff00ff; } }
        .rainbow-bg { animation: rainbow 2s infinite linear !important; color: #fff; text-shadow: 1px 1px #000; }
        .window { display:none; position:fixed; inset:0; background:rgba(0,0,0,0.98); z-index:100; padding:15px; overflow-y:auto; }
        .content { background:#1a1a1a; padding:15px; border-radius:20px; border:2px solid #ffcc00; text-align:left; }
        .close-btn { background:#ff4444; color:white; border:none; padding:15px; width:100%; border-radius:12px; margin-top:10px; font-weight:bold; cursor:pointer; }
        .opt-btn { background:#333; color:white; border:1px solid #444; padding:12px; width:100%; margin:5px 0; border-radius:8px; display:flex; justify-content:space-between; align-items:center; cursor:pointer; }
        .b-grid { display:grid; grid-template-columns: 1fr 1fr 1fr; gap:8px; }
        .b-card { padding:10px; border-radius:8px; text-align:center; font-size:10px; font-weight:bold; cursor:pointer; border:1px solid rgba(255,255,255,0.1); }
        .changelog-tag { color: #ffcc00; font-size: 12px; margin-top: 10px; display: block; border-bottom: 1px solid #333; padding-bottom: 5px; }
    </style>

    <div onclick="openWin('win-profile')" style="background:#111; padding:12px; display:flex; justify-content:space-between; border-bottom:2px solid #ffcc00; cursor:pointer;">
        <div style="display:flex; align-items:center; gap:10px;">
            <div id="p-icon" style="font-size:24px;">üë§</div>
            <div style="text-align:left;">
                <div id="p-nick" style="color:#ffcc00; font-size:16px;">–ì—Ä–∞–≤–µ—Ü—å</div>
                <div id="p-rank" style="font-size:10px; color:#aaa;">–û–¥–∏–Ω–æ–∫–∏–π –≥–æ–Ω—â–∏–∫</div>
            </div>
        </div>
        <div style="text-align:right;">
            <div style="color:#ffcc00;">üèÜ <span id="trophies">0</span></div>
            <div id="selected-name" style="font-size:10px; color:#aaa;">SHELLY</div>
        </div>
    </div>

    <div style="padding:20px;">
        <h1 style="color:#ffcc00; font-size:28px; text-shadow: 2px 2px #444;">KEDZI BRAWL</h1>
        <div id="cheat-indicator" style="color:#ff00ff; font-size:12px; margin-bottom:5px; display:none;">‚ú® –ê–ö–¢–ò–í–û–í–ê–ù–û –ó–Ü–õ–õ–Ø –ß–ò–¢–ï–†–°–¢–í–ê</div>
        <div style="background:#222; padding:8px; border-radius:10px; margin-bottom:15px; border: 1px solid #333;">
            –†–ï–ñ–ò–ú: <span id="cur-mode-txt" style="color:#00ff00;">–°—Ç–æ–ª–∫–Ω–æ–≤–µ–Ω–∏–µ</span>
        </div>

        <button onclick="startBattle()" id="play-btn" style="background:#ffcc00; width:100%; padding:20px; font-size:24px; border:none; border-radius:20px; font-weight:bold; color:#000; margin-bottom:15px; cursor:pointer;">–ì–†–ê–¢–ò</button>
        
        <div style="display:grid; grid-template-columns: 1fr 1fr; gap:10px;">
            <button onclick="openWin('win-modes')" style="background:#2ecc71; padding:15px; border-radius:12px; border:none; color:#000; font-weight:bold; grid-column: span 2;">–û–ë–†–ê–¢–ò –†–ï–ñ–ò–ú</button>
            <button onclick="openWin('win-brawlers')" style="background:#3498db; padding:15px; border-radius:12px; border:none; color:#fff; font-weight:bold;">–ë–†–ê–í–õ–ï–†–ò</button>
            <button onclick="openWin('win-shop')" style="background:#e74c3c; padding:15px; border-radius:12px; border:none; color:#fff; font-weight:bold;">–ú–ê–ì–ê–ó–ò–ù</button>
            <button onclick="openWin('win-promo')" style="background:#f1c40f; padding:15px; border-radius:12px; border:none; color:#000; font-weight:bold; grid-column: span 2;">–ü–†–û–ú–û–ö–û–î üéÅ</button>
            <button onclick="openStarrDrop()" style="background:#8e44ad; padding:15px; border-radius:12px; border:none; color:#fff; font-weight:bold; grid-column: span 2;">–°–¢–ê–† –î–†–û–ü (15 üèÜ)</button>
        </div>

        <button onclick="openWin('win-changelog')" style="position:fixed; bottom:15px; right:15px; background:#444; color:#ccc; border:none; padding:8px 15px; border-radius:8px; font-size:12px; cursor:pointer; opacity:0.8;">CHANGELOG üìú</button>
    </div>

    <div id="win-changelog" class="window">
        <div class="content" style="font-size:13px; font-family:sans-serif;">
            <h2 style="color:#ffcc00;">–Ü–°–¢–û–†–Ü–Ø –û–ù–û–í–õ–ï–ù–¨</h2>
            <span class="changelog-tag">v9.7.1 - CHANGELOG UPDATE</span>
            ‚Ä¢ –î–æ–¥–∞–Ω–æ —Ü–µ –≤—ñ–∫–Ω–æ —ñ—Å—Ç–æ—Ä—ñ—ó –∑–º—ñ–Ω.<br>
            ‚Ä¢ –ü–æ—Ñ—ñ–∫—à–µ–Ω–æ –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è –Ω—ñ–∫–Ω–µ–π–º—É —Ç–∞ –ø—Ä–æ—Ñ—ñ–ª—é.<br>
            <span class="changelog-tag">v9.7 - CHEAT UPDATE</span>
            ‚Ä¢ –ó—ñ–ª–ª—è —Ç–æ—Ç–∞–ª—å–Ω–æ–≥–æ —á–∏—Ç–µ—Ä—Å—Ç–≤–∞ (1350üèÜ) ‚Äî 100% –ø–µ—Ä–µ–º–æ–≥–∞.<br>
            ‚Ä¢ –ù–æ–≤—ñ –î—É–µ–ª—ñ: –ü–µ—Ä–µ–º–æ–≥–∞ x1.45, –ü—Ä–æ–≥—Ä–∞—à -1000üèÜ.<br>
            <span class="changelog-tag">v9.6 - BALANCE & SELECT FIX</span>
            ‚Ä¢ –í–∏–ø—Ä–∞–≤–ª–µ–Ω–æ –≤–∏–±—ñ—Ä –±—Ä–∞–≤–ª–µ—Ä—ñ–≤ —É –º–µ–Ω—é.<br>
            ‚Ä¢ –°—É–ø–µ—Ä —Ç–æ—Ä–∫–∞–Ω–Ω—è –≤ –°—Ç–∞—Ä –î—Ä–æ–ø–∞—Ö –∑—Ä—ñ–∑–∞–Ω–æ –¥–æ 1.5%.<br>
            <span class="changelog-tag">v9.5 - KEDZI REBORN</span>
            ‚Ä¢ Kedzi –æ—Ç—Ä–∏–º–∞–≤ —Ä–∞–π–¥—É–∂–Ω–∏–π —Ñ–æ–Ω.<br>
            ‚Ä¢ –î–æ–¥–∞–Ω–æ —Å–ª–æ—Ç–∏ –¥–ª—è 99 –±—Ä–∞–≤–ª–µ—Ä—ñ–≤.<br>
            <span class="changelog-tag">v8.0 - BASE GAME</span>
            ‚Ä¢ –†–µ–ª—ñ–∑ –æ—Å–Ω–æ–≤–Ω–æ—ó –º–µ—Ö–∞–Ω—ñ–∫–∏, –°—Ç–∞—Ä –î—Ä–æ–ø–∏, –ü—Ä–æ–º–æ–∫–æ–¥–∏.
        </div>
        <button onclick="closeWin('win-changelog')" class="close-btn">–ó–ê–ö–†–ò–¢–ò</button>
    </div>

    <div id="win-shop" class="window"><div class="content"><h2>–ú–ê–ì–ê–ó–ò–ù</h2><div id="shop-items"></div></div><button onclick="closeWin('win-shop')" class="close-btn">–ó–ê–ö–†–ò–¢–ò</button></div>
    <div id="win-profile" class="window"><div class="content"><h2>–ü–†–û–§–Ü–õ–¨</h2><p>–ù–Ü–ö:</p><input type="text" id="nick-in" placeholder="–í–≤–µ–¥—ñ—Ç—å –Ω—ñ–∫..." style="width:90%; padding:12px; background:#333; color:#fff; border:1px solid #ffcc00; border-radius:8px;"><button onclick="saveProfile()" class="close-btn" style="background:#2ecc71;">–ó–ë–ï–†–ï–ì–¢–ò –¢–ê –ó–ê–ö–†–ò–¢–ò</button></div><button onclick="closeWin('win-profile')" class="close-btn">–°–ö–ê–°–£–í–ê–¢–ò</button></div>
    <div id="win-brawlers" class="window"><h2 style="color:#ffcc00;">–ë–†–ê–í–õ–ï–†–ò (<span id="b-count">1</span>/99)</h2><div id="brawlers-list" class="b-grid"></div><button onclick="closeWin('win-brawlers')" class="close-btn">–ó–ê–ö–†–ò–¢–ò</button></div>
    <div id="win-modes" class="window"><div class="content"><h2>–†–ï–ñ–ò–ú–ò</h2><button class="opt-btn" onclick="setMode(1500,'–°—Ç–æ–ª–∫–Ω–æ–≤–µ–Ω–∏–µ',false)">üöÄ –°—Ç–æ–ª–∫–Ω–æ–≤–µ–Ω–∏–µ (+8/-7)</button><button class="opt-btn" onclick="setMode(10000,'üëë –î–£–ï–õ–¨',true)" style="color:red;">üëë –î–£–ï–õ–¨ (x1.45 / -1000)</button></div><button onclick="closeWin('win-modes')" class="close-btn">–ó–ê–ö–†–ò–¢–ò</button></div>
    <div id="win-promo" class="window"><div class="content"><h2>–ü–†–û–ú–û–ö–û–î</h2><input type="text" id="promo-in" style="width:90%; padding:15px;"><button onclick="usePromo()" class="close-btn" style="background:#2ecc71;">OK</button></div><button onclick="closeWin('win-promo')" class="close-btn">–ó–ê–ö–†–ò–¢–ò</button></div>
    <div id="win-drop" class="window"><h1 id="drop-rarity" style="margin-top:40px; font-size:35px;">RARE</h1><div id="drop-box" onclick="tapDrop()" style="width:180px; height:180px; background:#fff; margin:30px auto; border:8px solid #fff; border-radius:40px; font-size:80px; display:flex; align-items:center; justify-content:center; cursor:pointer;">‚≠ê</div><p id="drop-taps">–¢–ê–ü–ê–ô! (4)</p></div>

    <script>
        let trophies = 0, selected = "shelly", curMode = {t:1500, n:'–°—Ç–æ–ª–∫–Ω–æ–≤–µ–Ω–∏–µ', isDuel: false};
        let dropData = {taps:0, rarity:0, ultra:false};
        let myIcons = ["üë§"], curIcon = "üë§", usedPromos = []; 
        let hasCheatPotion = false, cheatActive = false;

        const brawlers = {
            "shelly":{n:"Shelly",r:"rare",ow:true,c:0.55},"nita":{n:"Nita",r:"rare",ow:false,c:0.58},"colt":{n:"Colt",r:"rare",ow:false,c:0.6},"bull":{n:"Bull",r:"rare",ow:false,c:0.59},
            "edgar":{n:"Edgar",r:"epic",ow:false,c:0.75},"moe":{n:"Moe",r:"mythic",ow:false,c:0.86},
            "kenji":{n:"Kenji",r:"legendary",ow:false,c:0.91},"kedzi":{n:"Kedzi",r:"ultra",ow:false,c:0.95}
        };

        function saveData() {
            const ownedBrawlers = Object.keys(brawlers).filter(id => brawlers[id].ow);
            const nick = document.getElementById('p-nick').innerText;
            const data = { trophies, ownedBrawlers, usedPromos, curIcon, selected, hasCheatPotion, cheatActive, nick };
            localStorage.setItem('kedzi_brawl_save', JSON.stringify(data));
        }

        function loadData() {
            const saved = localStorage.getItem('kedzi_brawl_save');
            if (saved) {
                const data = JSON.parse(saved);
                trophies = data.trophies || 0;
                usedPromos = data.usedPromos || [];
                selected = data.selected || "shelly";
                hasCheatPotion = data.hasCheatPotion || false;
                cheatActive = data.cheatActive || false;
                document.getElementById('p-nick').innerText = data.nick || "–ì—Ä–∞–≤–µ—Ü—å";
                if (data.ownedBrawlers) data.ownedBrawlers.forEach(id => { if(brawlers[id]) brawlers[id].ow = true; });
                updateUI();
            }
        }

        function updateUI() {
            document.getElementById('trophies').innerText = trophies;
            document.getElementById('selected-name').innerText = brawlers[selected].n.toUpperCase();
            document.getElementById('cheat-indicator').style.display = cheatActive ? 'block' : 'none';
        }

        function saveProfile() {
            const newNick = document.getElementById('nick-in').value;
            if(newNick) document.getElementById('p-nick').innerText = newNick;
            saveData();
            closeWin('win-profile');
        }

        function startBattle() {
            const btn = document.getElementById('play-btn'); btn.disabled = true; btn.innerText = "–£ –ë–û–Æ...";
            setTimeout(() => {
                let win = cheatActive ? true : (Math.random() < brawlers[selected].c);
                if (curMode.isDuel) {
                    if (win) { let rew = Math.floor(trophies * 0.45) || 50; trophies += rew; alert("–ü–ï–†–ï–ú–û–ì–ê! +" + rew + "üèÜ"); }
                    else { trophies = Math.max(0, trophies - 1000); alert("–ü–†–û–ì–†–ê–®! -1000üèÜ"); }
                } else {
                    let rew = win ? 8 : -7; trophies = Math.max(0, trophies + rew);
                    alert(win ? "–ü–ï–†–ï–ú–û–ì–ê! +8üèÜ" : "–ü–†–û–ì–†–ê–®! -7üèÜ");
                }
                if (cheatActive) { cheatActive = false; hasCheatPotion = false; }
                updateUI(); btn.disabled = false; btn.innerText = "–ì–†–ê–¢–ò"; saveData();
            }, curMode.t);
        }

        function buyItem(n,t,p) {
            if(trophies >= p) {
                if(t === 'cheat') { hasCheatPotion = true; cheatActive = true; alert("–ó–Ü–õ–õ–Ø –ö–£–ü–õ–ï–ù–û!"); }
                else if(t === 'r') { /* –±–æ–∫—Å */ }
                trophies -= p; saveData(); updateUI(); renderShop();
            } else alert("–ù–µ–¥–æ—Å—Ç–∞—Ç–Ω—å–æ –∫—É–±–∫—ñ–≤!");
        }

        function renderShop() {
            const s = document.getElementById('shop-items'); s.innerHTML = "";
            let items = [{n:'LEGENDARY BOX',p:1000,t:'r'}, {n:'–ó–Ü–õ–õ–Ø –ß–ò–¢–ï–†–°–¢–í–ê',p:1350,t:'cheat'}];
            items.forEach(item => {
                let dis = (item.t==='cheat' && hasCheatPotion) ? "opacity:0.5;pointer-events:none;" : "";
                s.innerHTML += `<div class="opt-btn" style="${dis}" onclick="buyItem('${item.n}','${item.t}',${item.p})"><span>${item.n}</span> <span>${item.p}üèÜ</span></div>`;
            });
        }

        function selectBrawler(id) { selected = id; updateUI(); closeWin('win-brawlers'); saveData(); }
        function renderBrawlers() {
            const l = document.getElementById('brawlers-list'); l.innerHTML = ""; let count = 0;
            const colors = {rare:"#00ff00", super_rare:"#3498db", epic:"#9b59b6", mythic:"#ff0000", legendary:"#f1c40f", ultra:"#fff"};
            for(let id in brawlers) { if(brawlers[id].ow) { count++; let cls = (id==="kedzi")?"rainbow-bg":""; l.innerHTML += `<div class="b-card ${cls}" style="background:${colors[brawlers[id].r]}" onclick="selectBrawler('${id}')">${brawlers[id].n}</div>`; } }
            document.getElementById('b-count').innerText = count;
        }

        function openWin(id) { document.getElementById(id).style.display = 'block'; if(id==='win-shop') renderShop(); if(id==='win-brawlers') renderBrawlers(); if(id==='win-profile') document.getElementById('nick-in').value = document.getElementById('p-nick').innerText; }
        function closeWin(id) { document.getElementById(id).style.display = 'none'; }
        function setMode(t, n, d) { curMode = {t, n, isDuel:d}; document.getElementById('cur-mode-txt').innerText = n; closeWin('win-modes'); }
        function openStarrDrop() { if(trophies>=15) { trophies-=15; updateUI(); openWin('win-drop'); } else alert("15 üèÜ!"); }
        function tapDrop() { /* –õ–æ–≥—ñ–∫–∞ –¥—Ä–æ–ø—ñ–≤ —è–∫ —É v9.6 */ }
        function usePromo() { /* –õ–æ–≥—ñ–∫–∞ –ø—Ä–æ–º–æ */ }
        window.onload = loadData;
    </script>
</body>
</html>
