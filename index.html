<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>KEDZI BRAWL v9.9.3 - LUCKY TITLE</title>
</head>
<body style="margin:0; background:#000; color:#fff; font-family: 'Arial Black', sans-serif; text-align:center; overflow:hidden; user-select:none;">

    <style>
        @keyframes rainbow { 0% { background: #ff0000; } 20% { background: #ffcc00; } 40% { background: #00ff00; } 60% { background: #00ffff; } 80% { background: #0000ff; } 100% { background: #ff00ff; } }
        .rainbow-bg { animation: rainbow 2s infinite linear !important; color: #fff; text-shadow: 2px 2px #000; }
        @keyframes gold-glow { 0% { text-shadow: 0 0 5px #f1c40f; } 50% { text-shadow: 0 0 20px #f1c40f, 0 0 30px #ffcc00; } 100% { text-shadow: 0 0 5px #f1c40f; } }
        .lucky-style { animation: gold-glow 1.5s infinite; color: #f1c40f !important; }
        .window { display:none; position:fixed; inset:0; background:rgba(0,0,0,0.98); z-index:1000; padding:15px; overflow-y:auto; }
        .content { background:#1a1a1a; padding:20px; border-radius:25px; border:3px solid #ffcc00; margin-top:10px; }
        .opt-btn { background:#333; color:white; border:2px solid #444; padding:15px; width:100%; margin:8px 0; border-radius:12px; display:flex; justify-content:space-between; align-items:center; cursor:pointer; font-weight:bold; }
        .res-win { display:none; position:fixed; top:50%; left:50%; transform:translate(-50%, -50%); background:#222; border:5px solid #ffcc00; padding:30px; border-radius:30px; z-index:2000; min-width:220px; box-shadow: 0 0 50px rgba(0,0,0,1); }
    </style>

    <div style="background:#111; padding:10px 15px; display:flex; justify-content:space-between; border-bottom:3px solid #ffcc00; align-items:center;">
        <div style="display:flex; align-items:center; gap:10px;">
            <div id="p-icon" style="font-size:30px;">üë§</div>
            <div style="text-align:left;">
                <div id="p-nick" style="color:#ffcc00; font-size:16px;">–ì—Ä–∞–≤–µ—Ü—å</div>
                <div id="p-title-display" style="font-size:10px; color:#aaa; font-weight:bold; letter-spacing:1px;">–ü–û–ß–ê–¢–ö–Ü–í–ï–¶–¨</div>
            </div>
        </div>
        <div style="text-align:right;">
            <div style="color:#3498db; font-size:18px;">üèÜ <span id="trophies">0</span></div>
            <div style="color:#f1c40f; font-size:18px;">üí∞ <span id="coins">0</span></div>
        </div>
    </div>

    <div style="padding:20px;">
        <h1 style="color:#ffcc00; font-size:28px; text-shadow: 2px 2px #000;">KEDZI BRAWL</h1>
        <div id="cur-mode-txt" style="background:#222; padding:8px; border-radius:10px; margin-bottom:15px; color:#00ff00; font-size:14px; border:1px solid #333;">üöÄ –°—Ç–æ–ª–∫–Ω–æ–≤–µ–Ω–∏–µ</div>

        <button onclick="startBattle()" id="play-btn" style="background:linear-gradient(#ffdd00, #ffcc00); width:100%; padding:20px; font-size:26px; border:none; border-radius:20px; font-weight:bold; color:#000; box-shadow: 0 6px #b39200; margin-bottom:15px; cursor:pointer;">–ì–†–ê–¢–ò</button>
        
        <div style="display:grid; grid-template-columns: 1fr 1fr; gap:10px;">
            <button onclick="openWin('win-modes')" style="background:#2ecc71; padding:15px; border-radius:12px; border:none; font-weight:bold; grid-column: span 2;">–†–ï–ñ–ò–ú–ò –ì–†–ò</button>
            <button onclick="openWin('win-brawlers')" style="background:#3498db; padding:15px; border-radius:12px; border:none; color:#fff; font-weight:bold;">–ë–†–ê–í–õ–ï–†–ò</button>
            <button onclick="openWin('win-shop')" style="background:#e74c3c; padding:15px; border-radius:12px; border:none; color:#fff; font-weight:bold;">–ú–ê–ì–ê–ó–ò–ù</button>
            <button onclick="openStarrDrop()" style="background:#8e44ad; padding:20px; border-radius:15px; border:none; color:#fff; font-weight:bold; grid-column: span 2; font-size:18px; box-shadow: 0 4px #5e2d73;">–°–¢–ê–† –î–†–û–ü (15 üèÜ)</button>
        </div>

        <div style="margin-top:20px; display:flex; justify-content:center; gap:10px;">
            <button onclick="openWin('win-promo')" style="background:none; border:none; color:#444; font-size:11px;">–ü–†–û–ú–û–ö–û–î</button>
            <button onclick="openWin('win-credits')" style="background:none; border:none; color:#444; font-size:11px;">CREDITS</button>
        </div>
    </div>

    <div id="win-res" class="res-win">
        <h2 id="res-status" style="margin:0;">–ü–ï–†–ï–ú–û–ì–ê!</h2>
        <h1 id="res-diff" style="font-size:45px; margin:10px 0;">+8 üèÜ</h1>
        <button onclick="closeRes()" class="opt-btn" style="background:#ffcc00; color:#000; justify-content:center; border:none;">–ü–†–û–î–û–í–ñ–ò–¢–ò</button>
    </div>

    <div id="win-drop" class="window">
        <h1 id="drop-rarity" style="margin-top:50px; font-size:40px;">RARE</h1>
        <div id="drop-box" onclick="tapDrop()" style="width:180px; height:180px; background:#fff; margin:30px auto; border:10px solid #fff; border-radius:50px; font-size:100px; display:flex; align-items:center; justify-content:center; cursor:pointer; transition: 0.1s;">‚≠ê</div>
        <p id="drop-taps" style="font-size:20px;">–¢–ê–ü–ê–ô! (4)</p>
    </div>

    <div id="win-shop" class="window"><div class="content">
        <h2>–ú–ê–ì–ê–ó–ò–ù</h2>
        <div id="shop-items-list"></div>
        <button onclick="closeWin('win-shop')" class="opt-btn" style="background:#ff4444; justify-content:center;">–ó–ê–ö–†–ò–¢–ò</button>
    </div></div>

    <div id="win-modes" class="window"><div class="content">
        <h2>–†–ï–ñ–ò–ú–ò</h2>
        <button class="opt-btn" onclick="setMode(1000,'üöÄ –°—Ç–æ–ª–∫–Ω–æ–≤–µ–Ω–∏–µ',8)"><span>üöÄ –°—Ç–æ–ª–∫–Ω–æ–≤–µ–Ω–∏–µ</span><span>+8üèÜ</span></button>
        <button class="opt-btn" onclick="setMode(1000,'‚öΩ –ë—Ä–∞–≤–ª –ë–æ–ª',5)"><span>‚öΩ –ë—Ä–∞–≤–ª –ë–æ–ª</span><span>+5üèÜ</span></button>
        <button class="opt-btn" onclick="setMode(1200,'üî• –ù–æ–∫–∞—É—Ç',8)"><span>üî• –ù–æ–∫–∞—É—Ç</span><span>+8üèÜ</span></button>
        <button class="opt-btn" onclick="setMode(600,'‚öîÔ∏è –î—É–µ–ª—ñ',10)"><span>‚öîÔ∏è –î—É–µ–ª—ñ</span><span>+10üèÜ</span></button>
        <button onclick="closeWin('win-modes')" class="opt-btn" style="background:#ff4444; justify-content:center;">–ù–ê–ó–ê–î</button>
    </div></div>

    <div id="win-credits" class="window"><div class="content">
        <h2>CREDITS üéñÔ∏è</h2>
        <p>–ê–≤—Ç–æ—Ä –≥—Ä–∏: <br><b style="color:#ffcc00; font-size:20px;">LOL_pak661 / Amogus_144</b></p>
        <p style="color:#00ff00; font-size:14px;">üî• –û–ß–Ü–ö–£–ô–¢–ï –ù–û–í–Ü –ü–†–û–ï–ö–¢–ò!</p>
        <button onclick="closeWin('win-credits')" class="opt-btn" style="background:#ff4444; justify-content:center;">–û–ö</button>
    </div></div>

    <div id="win-brawlers" class="window"><div class="content"><h2>–û–ë–ï–†–ò –ì–ï–†–û–Ø</h2><div id="brawlers-list" style="display:grid; grid-template-columns:1fr 1fr; gap:10px;"></div><button onclick="closeWin('win-brawlers')" class="opt-btn" style="background:#ff4444; justify-content:center;">–ó–ê–ö–†–ò–¢–ò</button></div></div>
    <div id="win-promo" class="window"><div class="content"><h2>–í–í–ï–î–ò –ö–û–î</h2><input type="text" id="promo-in" style="width:85%; padding:15px; border-radius:10px; text-align:center; font-size:18px;"><button onclick="usePromo()" class="opt-btn" style="background:#2ecc71; justify-content:center; margin-top:10px;">–û–ö</button><button onclick="closeWin('win-promo')" class="opt-btn" style="background:none; border:none; color:#666; justify-content:center;">–°–ö–ê–°–£–í–ê–¢–ò</button></div></div>

    <script>
        let trophies = 0, coins = 0, selected = "shelly", curMode = {t:1000, n:'üöÄ –°—Ç–æ–ª–∫–Ω–æ–≤–µ–Ω–∏–µ', winGain: 8};
        let dropData = {taps:4, rarityIdx:0}, cheatActive = false, usedPromos = [];
        let currentTitle = "–ü–û–ß–ê–¢–ö–Ü–í–ï–¶–¨", currentIcon = "üë§";

        const brawlers = {
            "shelly":{n:"Shelly",ow:true,c:0.55},"edgar":{n:"Edgar",ow:true,c:0.75},
            "nita":{n:"Nita",ow:false,c:0.58},"moe":{n:"Moe",ow:false,c:0.86},
            "kenji":{n:"Kenji",ow:false,c:0.91},"leon":{n:"Leon",ow:false,c:0.93},"kedzi":{n:"Kedzi",ow:false,c:0.95}
        };

        const shopItems = [
            {id:'leon', n:'ü¶é LEON', p:3500, type:'brawler'},
            {id:'lucky_t', n:'üé∞ Lucky Roller (Title)', p:5000, type:'title'},
            {id:'topg', n:'TOP G', p:1000, type:'title'},
            {id:'ceo', n:'CEO of Brawl', p:2500, type:'title'},
            {id:'fire', n:'üî•', p:500, type:'icon'},
            {id:'skull', n:'üíÄ', p:500, type:'icon'},
            {id:'crown', n:'üëë', p:2000, type:'icon'},
            {id:'cheat', n:'‚ú® –ú–∞–≥—ñ—á–Ω–µ –ó—ñ–ª–ª—è', p:1350, type:'cheat'}
        ];

        const rarities = [
            {n:"RARE", c:"#00ff00", b:200}, {n:"SUPER RARE", c:"#3498db", b:400},
            {n:"EPIC", c:"#9b59b6", b:600}, {n:"MYTHIC", c:"#ff0000", b:800},
            {n:"LEGENDARY", c:"#f1c40f", b:900}, {n:"ULTRA", c:"#ffffff", b:1000}
        ];

        function updateUI() {
            document.getElementById('trophies').innerText = trophies;
            document.getElementById('coins').innerText = coins;
            document.getElementById('selected-name').innerText = brawlers[selected].n.toUpperCase();
            document.getElementById('p-title-display').innerText = currentTitle;
            document.getElementById('p-icon').innerText = currentIcon;
            
            // –°—Ç–∏–ª—å Lucky Roller
            const nick = document.getElementById('p-nick');
            const title = document.getElementById('p-title-display');
            if(currentTitle === "Lucky Roller (Title)") {
                nick.classList.add('lucky-style');
                title.classList.add('lucky-style');
            } else {
                nick.classList.remove('lucky-style');
                title.classList.remove('lucky-style');
            }
        }

        function startBattle() {
            const btn = document.getElementById('play-btn'); btn.disabled = true;
            setTimeout(() => {
                let win = (cheatActive) ? true : (Math.random() < brawlers[selected].c);
                let diff = win ? curMode.winGain : -7;
                trophies = Math.max(0, trophies + diff);
                
                document.getElementById('res-status').innerText = win ? "–ü–ï–†–ï–ú–û–ì–ê!" : "–ü–†–û–ì–†–ê–®!";
                document.getElementById('res-status').style.color = win ? "#00ff00" : "#ff0000";
                document.getElementById('res-diff').innerText = (win ? "+" : "") + diff + " üèÜ";
                document.getElementById('win-res').style.display = "block";

                cheatActive = false; updateUI(); btn.disabled = false; saveData();
            }, curMode.t);
        }

        function closeRes() { document.getElementById('win-res').style.display = "none"; }

        function tapDrop() {
            const box = document.getElementById('drop-box');
            if(dropData.taps > 1) {
                dropData.taps--;
                if(Math.random() < 0.45) dropData.rarityIdx = Math.min(dropData.rarityIdx + 1, 5);
                updateDropUI();
                box.style.transform = "scale(1.1)"; setTimeout(()=>box.style.transform="scale(1)", 50);
            } else finishDrop();
        }

        function updateDropUI() {
            const r = rarities[dropData.rarityIdx];
            document.getElementById('drop-rarity').innerText = r.n;
            document.getElementById('drop-rarity').style.color = r.c;
            document.getElementById('drop-box').style.borderColor = r.c;
            document.getElementById('drop-taps').innerText = "–¢–ê–ü–ê–ô! (" + dropData.taps + ")";
            document.getElementById('drop-box').className = (r.n === "ULTRA") ? "rainbow-bg" : "";
        }

        function finishDrop() {
            let r = rarities[dropData.rarityIdx]; coins += r.b;
            alert("–í–ò–ü–ê–õ–û: " + r.n + " (+" + r.b + " üí∞)");
            updateUI(); closeWin('win-drop'); saveData();
        }

        function openStarrDrop() {
            if(trophies >= 15) { trophies -= 15; dropData = {taps:4, rarityIdx:0}; updateDropUI(); openWin('win-drop'); updateUI(); }
            else alert("–¢—Ä–µ–±–∞ 15 –∫—É–±–∫—ñ–≤!");
        }

        function openWin(id) { 
            document.getElementById(id).style.display = 'block'; 
            if(id==='win-shop') {
                let h = "";
                shopItems.forEach(item => {
                    if(item.type === 'brawler' && brawlers[item.id].ow) return;
                    h += `<div class="opt-btn" onclick="buyFromShop('${item.id}')"><span>${item.n}</span><span>${item.p} üí∞</span></div>`;
                });
                document.getElementById('shop-items-list').innerHTML = h;
            }
            if(id==='win-brawlers') {
                const l = document.getElementById('brawlers-list'); l.innerHTML = "";
                for(let id in brawlers) if(brawlers[id].ow) l.innerHTML += `<div style="background:#444; padding:15px; border-radius:12px;" onclick="selectB('${id}')">${brawlers[id].n}</div>`;
            }
        }

        function buyFromShop(itemId) {
            const item = shopItems.find(i => i.id === itemId);
            if(coins >= item.p) {
                coins -= item.p;
                if(item.type === 'brawler') brawlers[item.id].ow = true;
                if(item.type === 'title') currentTitle = item.n;
                if(item.type === 'icon') currentIcon = item.n;
                if(item.type === 'cheat') cheatActive = true;
                updateUI(); saveData(); alert("–£—Å–ø—ñ—à–Ω–æ –∫—É–ø–ª–µ–Ω–æ!"); closeWin('win-shop');
            } else alert("–ù–µ–¥–æ—Å—Ç–∞—Ç–Ω—å–æ –º–æ–Ω–µ—Ç!");
        }

        function usePromo() {
            const v = document.getElementById('promo-in').value.toUpperCase().trim();
            if(usedPromos.includes(v)) return alert("–ö–æ–¥ –≤–∂–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–æ!");
            if(v === 'IMRICH') { coins += 1500; usedPromos.push(v); alert("+1500 üí∞"); }
            if(v === 'ARTEMKO') { coins += 1000; usedPromos.push(v); alert("+1000 üí∞"); }
            updateUI(); saveData(); closeWin('win-promo');
        }
        function selectB(id) { selected=id; updateUI(); closeWin('win-brawlers'); saveData(); }
        function closeWin(id) { document.getElementById(id).style.display = 'none'; }
        function setMode(t, n, g) { curMode = {t, n, winGain: g}; document.getElementById('cur-mode-txt').innerText = n; closeWin('win-modes'); }
        
        function saveData() { localStorage.setItem('kedzi_save_v9_3', JSON.stringify({ trophies, coins, selected, usedPromos, currentTitle, currentIcon, owned: Object.keys(brawlers).filter(id => brawlers[id].ow) })); }
        function loadData() { 
            let s = JSON.parse(localStorage.getItem('kedzi_save_v9_3')); 
            if(s){ trophies=s.trophies||0; coins=s.coins||0; selected=s.selected; usedPromos=s.usedPromos||[]; currentTitle=s.currentTitle||"–ü–û–ß–ê–¢–ö–Ü–í–ï–¶–¨"; currentIcon=s.currentIcon||"üë§"; if(s.owned) s.owned.forEach(id=> {if(brawlers[id]) brawlers[id].ow=true}); updateUI(); }
        }
        window.onload = loadData;
    </script>
</body>
</html>
